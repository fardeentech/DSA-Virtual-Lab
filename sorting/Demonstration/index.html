<!DOCTYPE html>
<html>
  <head>
    <title>Insertion Sort Animation by Mr. Fardeen Pathan Khan</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="boxes.css" />
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
    <script src="jquery-latest.js"></script>
    <script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
    <script type="text/javascript" src="GetElementPosition.js"></script>
    <link rel="stylesheet" type="text/css" href="codecolor.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      /* Same styles as before */
    </style>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-89940905-27"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-89940905-27');
  </script>

  <script type="text/javascript" src="../logging.js"></script>
</head>

<body onload="init()" onresize="" style="font-family: times new roman;"> 
  <h3 align="center"><b>Insertion Sort <a href="" >Animation</a></b> by 
    <a href="" >Fardeen Khan Pathan</a>
  </h3>

  <div> 
    Usage: Perform insertion sort for a list of integers. Click the Step button to insert the current element to a sorted sublist. Click the Reset button to start over with a new random list.
  </div>

  <!-- Input for array size -->
  <div style="text-align:center; margin-top:20px;">
    <label for="arraySize">Enter the size of the array (max 50): </label>
    <input type="number" id="arraySize" name="arraySize" min="1" max="50" value="16">
    <button type="button" class="button" onclick="reset()">Submit Size</button>
  </div>

  <div id="arrayContainer" style="height: 70px; font-size: 200%"></div>
  
  <div id ="iValue" style="position: absolute; height: 100px;">i: 1</div>
  <div id ="iPosition" style="position: absolute; height: 100px; font-size: 200%">&#8595;</div>

  <!-- Array display -->
  <div id="arrayTable" style="display: table; overflow: hidden; width: 90%; margin: 0 auto;"></div>

  <div style="display: table; overflow: hidden; width: 90%; margin: 0 auto;">
    <div id="checkTable"></div>
  </div>

  <div style="display: table-cell; vertical-align: middle; background: white; width: 30px; height: 45px; max-width: 30px; text-align: center;">
    <div id="highlight" style="opacity:1.0;"></div>
    <div id="currentFly" style="opacity:1.0"></div>
    <div id="sortedFly"></div>
  </div>

  <div align="center">
    <button id="step" type="button" class="button" onclick="step()">Step</button>
    <button id="reset" type="button" class="button" onclick="reset()">Reset</button>
  </div>

  <div style="text-align: center; margin-top: 1em">
    <span id="remark" style="background-color: chocolate; color: white; alignment-adjust: central; text-align: center; max-width: 800px; margin-left: auto; margin-right: auto">
      A list is filled with random numbers.
    </span>
  </div>

  <script>
    var SIZE = 16; // Default size
    var listValues = [];

    function init() {
      reset();
    }

    function reset() {
      // Get array size from user input
      SIZE = document.getElementById('arraySize').value;
      SIZE = Math.min(Math.max(SIZE, 1), 50); // Ensure the size is within limits
      
      isFindFirst = true;
      current = 0;
      minPosition = 0;
      i = 0;

      document.getElementById('highlight').style.visibility = 'hidden';
      document.getElementById('currentFly').style.visibility = 'hidden';
      document.getElementById('sortedFly').style.visibility = 'hidden';
      document.getElementById('iPosition').style.visibility = 'hidden';
      document.getElementById('iValue').style.visibility = 'hidden';

      // Reset the display
      setRandomValue();
      resetColor();
      document.getElementById('remark').innerHTML = 'A new random list is created';
      document.getElementById('value').disabled = false;

      // Clear the check table
      document.getElementById('checkTable').innerHTML = '';
      for (var j = 0; j < SIZE; j++) {
        document.getElementById('checkTable').innerHTML +=
          '<div style="display: table-cell; vertical-align: middle;' +
          'background: white; width: 30px; height: 10px; text-align: center;">' +
          '<div id="check' + j + '" style="color: #EB0D1B; weight: bold"></div></div>';
      }
    }

    function resetColor() {
      for (var i = 0; i < SIZE; i++) {
        id = 'list' + i;
        document.getElementById(id).style.backgroundColor = "white";
        document.getElementById(id).style.color = "black";
      }
    }

    function setRandomValue() {
      listValues = [];
      // Generate random numbers for the array
      for (var i = 0; i < SIZE; i++) {
        listValues.push(Math.floor(Math.random() * 100));
      }

      // Update the table display
      document.getElementById('arrayTable').innerHTML = '';
      for (var i = 0; i < SIZE; i++) {
        document.getElementById('arrayTable').innerHTML +=
          '<div style="display: table-cell; vertical-align: middle;' +
          'border: 1px blue solid; background: white;' +
          'width: 30px; height: 30px; text-align: center;">' +
          '<div id="list' + i + '" style="color: black; weight: bold">' +
          listValues[i] + '</div></div>';
      }
    }

    // Other unchanged functions (e.g., step, step1, setPointerPosition, etc.)

  </script>
</body>
</html>
